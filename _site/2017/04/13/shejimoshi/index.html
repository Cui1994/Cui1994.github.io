<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>《大话设计模式》Python实现</title>
    <meta name="description" content="学习自大话设计模式，将其C#语言实现翻译为Python，同时参照此系列博客：Python设计模式 加深理解。">

    <link rel="shortcut icon" href="/favicon.ico?" type="image/x-icon">
    <link rel="icon" href="/favicon.ico?" type="image/x-icon">
    <link rel="stylesheet" href="https://cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://at.alicdn.com/t/font_8v3czwksspqlg14i.css">
    <link rel="stylesheet" href="/css/main.css ">
    <link rel="canonical" href="http://localhost:4000/2017/04/13/shejimoshi/">
    <link rel="alternate" type="application/rss+xml" title="awakeBird" href="http://localhost:4000/feed.xml ">





</head>


  <body>

    <header id="top">
    <div class="wrapper">
        <a href="/" class="brand">awakeBird</a>
        <small>Back-end Dev Engineer</small>
        <button id="headerMenu" class="menu"><i class="fa fa-bars"></i></button>
        <nav id="headerNav">
            <ul>
                <li>
                    
                    <a href="/">
                    
                        <i class="fa fa-home"></i>Home
                    </a>
                </li>

                
                    
                    <li>
                        
                        <a href="/archive/">
                        
                            <i class="fa fa-archive"></i>Archives
                        </a>
                    </li>
                    
                
                    
                    <li>
                        
                        <a href="/category/">
                        
                            <i class="fa fa-th-list"></i>Categories
                        </a>
                    </li>
                    
                
                    
                    <li>
                        
                        <a href="/tag/">
                        
                            <i class="fa fa-tags"></i>Tags
                        </a>
                    </li>
                    
                
                    
                    <li>
                        
                        <a href="/collection/">
                        
                            <i class="fa fa-bookmark"></i>Collections
                        </a>
                    </li>
                    
                
                    
                    <li>
                        
                        <a href="/about/">
                        
                            <i class="fa fa-heart"></i>About
                        </a>
                    </li>
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            </ul>
        </nav>
    </div>
</header>


        <div class="page clearfix" post>
    <div class="left">
        <h1>《大话设计模式》Python实现</h1>
        <div class="label">

            <div class="label-card">
                <i class="fa fa-calendar"></i>2017-04-13
            </div>

            <div class="label-card">
                
            </div>

            <div class="label-card">
                
            </div>

            <div class="label-card">
            


<!-- <span class="point">•</span> -->
<span class="categories">
  <i class="fa fa-th-list"></i>
  
    
        <a href="/category/#设计模式" title="Category: 设计模式" rel="category">设计模式</a>
    
  

  <!-- <span class="point">•</span> -->
</span>


            </div>

            <div class="label-card">
            
<!-- <span class="point">•</span> -->
<span class="pageTag">
  <i class="fa fa-tags"></i>
  
    
        <!--a href="/tag/#%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F" title="Tag: 设计模式" rel="tag">设计模式</a-->
        <a href="/tag/#设计模式" title="Tag: 设计模式" rel="tag">设计模式</a>
    
  

</span>

            </div>

        </div>
        <hr>
        <article itemscope itemtype="http://schema.org/BlogPosting">
        <ul id="markdown-toc">
  <li><a href="#1简单工厂模式" id="markdown-toc-1简单工厂模式">1.简单工厂模式</a></li>
  <li><a href="#2策略模式" id="markdown-toc-2策略模式">2.策略模式</a></li>
  <li><a href="#3单一职责原则" id="markdown-toc-3单一职责原则">3.单一职责原则</a></li>
  <li><a href="#4开放封闭原则" id="markdown-toc-4开放封闭原则">4.开放封闭原则</a></li>
  <li><a href="#5依赖倒转原则" id="markdown-toc-5依赖倒转原则">5.依赖倒转原则</a></li>
  <li><a href="#6装饰模式" id="markdown-toc-6装饰模式">6.装饰模式</a></li>
  <li><a href="#7代理模式" id="markdown-toc-7代理模式">7.代理模式</a></li>
  <li><a href="#8工厂方法模式" id="markdown-toc-8工厂方法模式">8.工厂方法模式</a></li>
  <li><a href="#9原型模式" id="markdown-toc-9原型模式">9.原型模式</a></li>
  <li><a href="#10-模板方法模式" id="markdown-toc-10-模板方法模式">10. 模板方法模式</a></li>
  <li><a href="#11迪米特法则" id="markdown-toc-11迪米特法则">11.迪米特法则</a></li>
  <li><a href="#12外观模式" id="markdown-toc-12外观模式">12.外观模式</a></li>
  <li><a href="#13建造者模式" id="markdown-toc-13建造者模式">13.建造者模式</a></li>
  <li><a href="#14观察者模式" id="markdown-toc-14观察者模式">14.观察者模式</a></li>
  <li><a href="#15抽象工厂模式" id="markdown-toc-15抽象工厂模式">15.抽象工厂模式</a></li>
  <li><a href="#16状态模式" id="markdown-toc-16状态模式">16.状态模式</a></li>
  <li><a href="#17适配器模式" id="markdown-toc-17适配器模式">17.适配器模式</a></li>
</ul>

<p>学习自大话设计模式，将其C#语言实现翻译为Python，同时参照此系列博客：<a href="http://www.jianshu.com/p/84ae207ccaf7">Python设计模式</a> 加深理解。</p>

<p><img src="https://i.loli.net/2018/11/26/5bfc0186b4d84.png" alt="" /></p>

<h2 id="1简单工厂模式">1.简单工厂模式</h2>

<p>面向对象目标：</p>

<ul>
  <li>可维护：只需要改动需求制定功能的类或模块</li>
  <li>可复用：可以用在不同的环境下</li>
  <li>可扩展：增加功能只需要增加相应的模块</li>
  <li>灵活性好：可以任意组合功能</li>
</ul>

<p>耦合性：更改一个功能不需要接触其他功能（即使功能都是相似的），考虑通过封装、继承和多态将耦合性降低。</p>

<p>根据需求实例化要实例的对象（这些对象可能均继承自同一基类）。</p>

<p>缺点：违反了高内聚职责分配原则 <a href="http://www.cnblogs.com/sevenyuan/archive/2010/03/05/1678730.html">职责分配原则</a></p>

<p>计算器实例：</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># -*- coding:utf-8 -*-
</span><span class="kn">import</span> <span class="nn">re</span>

<span class="k">class</span> <span class="nc">Operation</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
	<span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">a</span> <span class="o">=</span> <span class="n">a</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">b</span> <span class="o">=</span> <span class="n">b</span>

	<span class="k">def</span> <span class="nf">calculate_result</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="n">result</span> <span class="o">=</span> <span class="mi">0</span>
		<span class="k">return</span> <span class="n">result</span>

<span class="k">class</span> <span class="nc">AddOperation</span><span class="p">(</span><span class="n">Operation</span><span class="p">):</span>
	<span class="k">def</span> <span class="nf">calculate_result</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">a</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">b</span>
		<span class="k">return</span> <span class="n">result</span>

<span class="k">class</span> <span class="nc">SubtractOperation</span><span class="p">(</span><span class="n">Operation</span><span class="p">):</span>
	<span class="k">def</span> <span class="nf">calculate_result</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">a</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">b</span>
		<span class="k">return</span> <span class="n">result</span>

<span class="k">class</span> <span class="nc">MultiplicationOperation</span><span class="p">(</span><span class="n">Operation</span><span class="p">):</span>
	<span class="k">def</span> <span class="nf">calculate_result</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">a</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">b</span>
		<span class="k">return</span> <span class="n">result</span>

<span class="k">class</span> <span class="nc">DivisionOperation</span><span class="p">(</span><span class="n">Operation</span><span class="p">):</span>
	<span class="k">def</span> <span class="nf">calculate_result</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">a</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">b</span>
		<span class="k">return</span> <span class="n">result</span>

<span class="k">class</span> <span class="nc">OperationFactory</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
	<span class="k">def</span> <span class="nf">create_operation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">operation</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
		<span class="k">if</span> <span class="n">operation</span> <span class="o">==</span> <span class="s">'+'</span><span class="p">:</span>
			<span class="k">return</span> <span class="n">AddOperation</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
		<span class="k">elif</span> <span class="n">operation</span> <span class="o">==</span> <span class="s">'-'</span><span class="p">:</span>
			<span class="k">return</span> <span class="n">SubtractOperation</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
		<span class="k">elif</span> <span class="n">operation</span> <span class="o">==</span> <span class="s">'*'</span><span class="p">:</span>
			<span class="k">return</span> <span class="n">MultiplicationOperation</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
		<span class="k">elif</span> <span class="n">operation</span> <span class="o">==</span> <span class="s">'/'</span><span class="p">:</span>
			<span class="k">return</span> <span class="n">DivisionOperation</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="k">raise</span> <span class="nb">ValueError</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span>
	<span class="n">input_string</span> <span class="o">=</span> <span class="nb">raw_input</span><span class="p">(</span><span class="s">'Enter your operation such as </span><span class="se">\'</span><span class="s">10+11=</span><span class="se">\'</span><span class="s">:'</span><span class="p">)</span>
	<span class="n">pattern</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="nb">compile</span><span class="p">(</span><span class="s">r'(\d+)(\+|\-|\*|\/)(\d+)'</span><span class="p">)</span>
	<span class="n">items</span> <span class="o">=</span> <span class="n">pattern</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="n">input_string</span><span class="p">)</span>
	<span class="k">try</span><span class="p">:</span>
		<span class="n">a</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">items</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
		<span class="n">operation</span> <span class="o">=</span> <span class="n">items</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">3</span><span class="p">]</span>
		<span class="n">b</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">items</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">2</span><span class="p">])</span>
		<span class="k">print</span> <span class="n">OperationFactory</span><span class="p">()</span><span class="o">.</span><span class="n">create_operation</span><span class="p">(</span><span class="n">operation</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span><span class="o">.</span><span class="n">calculate_result</span><span class="p">()</span>
	<span class="k">except</span><span class="p">:</span>
		<span class="k">print</span> <span class="s">'Wrong Input.'</span>
</code></pre></div></div>

<h2 id="2策略模式">2.策略模式</h2>

<p>将一系列算法家族封装，算法家族完成的是同一类功能的不同实现（都是用来解决同一个问题的，只是不同情况需要应用不同的算法），降低了客户端和算法类之间的耦合。</p>

<p>缺点：增加策略时仍然需要到<code class="highlighter-rouge">Context</code>类中增加一个新的判断分支。</p>

<p>超市活动实例：</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># -*- coding:utf-8 -*-
</span>
<span class="k">class</span> <span class="nc">Strategy</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
	<span class="c1"># 抽象算法类
</span>	<span class="k">def</span> <span class="nf">algorithm_interface</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="k">raise</span> <span class="nb">NotImplementedError</span><span class="p">()</span>

<span class="k">class</span> <span class="nc">NormalStrategy</span><span class="p">(</span><span class="n">Strategy</span><span class="p">):</span>

	<span class="k">def</span> <span class="nf">algorithm_interface</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">money</span><span class="p">):</span>
		<span class="k">return</span> <span class="n">money</span>

<span class="k">class</span> <span class="nc">RebateStrategy</span><span class="p">(</span><span class="n">Strategy</span><span class="p">):</span>

	<span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rebate</span><span class="p">):</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">rebate</span> <span class="o">=</span> <span class="n">rebate</span>

	<span class="k">def</span> <span class="nf">algorithm_interface</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">money</span><span class="p">):</span>
		<span class="k">return</span> <span class="n">money</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">rebate</span>

<span class="k">class</span> <span class="nc">ReturnStrategy</span><span class="p">(</span><span class="n">Strategy</span><span class="p">):</span>

	<span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">each_money</span><span class="p">,</span> <span class="n">return_money</span><span class="p">):</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">each_money</span> <span class="o">=</span> <span class="n">each_money</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">return_money</span> <span class="o">=</span> <span class="n">return_money</span>

	<span class="k">def</span> <span class="nf">algorithm_interface</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">money</span><span class="p">):</span>
		<span class="k">return</span> <span class="n">money</span><span class="o">-</span><span class="p">(</span><span class="n">money</span><span class="o">/</span><span class="bp">self</span><span class="o">.</span><span class="n">each_money</span><span class="p">)</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">return_money</span>

<span class="k">class</span> <span class="nc">Context</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
	<span class="c1"># 上下文，封装策略的实现细节
</span>	<span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">strategy_type</span><span class="p">):</span>
		<span class="k">if</span> <span class="n">strategy_type</span> <span class="o">==</span> <span class="s">'normal'</span><span class="p">:</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">strategy</span> <span class="o">=</span> <span class="n">NormalStrategy</span><span class="p">()</span>
		<span class="k">elif</span> <span class="n">strategy_type</span> <span class="o">==</span> <span class="s">'0.8 rebate'</span><span class="p">:</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">strategy</span> <span class="o">=</span> <span class="n">RebateStrategy</span><span class="p">(</span><span class="mf">0.8</span><span class="p">)</span>
		<span class="k">elif</span> <span class="n">strategy_type</span> <span class="o">==</span> <span class="s">'300 return 100'</span><span class="p">:</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">strategy</span> <span class="o">=</span> <span class="n">ReturnStrategy</span><span class="p">(</span><span class="mi">300</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>

	<span class="k">def</span> <span class="nf">context_interface</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">money</span><span class="p">):</span>
		<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">strategy</span><span class="o">.</span><span class="n">algorithm_interface</span><span class="p">(</span><span class="n">money</span><span class="p">)</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span>
	<span class="n">money</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">raw_input</span><span class="p">(</span><span class="s">'Enter money:'</span><span class="p">))</span>
	<span class="n">strategy_type</span> <span class="o">=</span> <span class="nb">raw_input</span><span class="p">(</span><span class="s">'Enter strategy type:'</span><span class="p">)</span>
	<span class="k">print</span> <span class="n">Context</span><span class="p">(</span><span class="n">strategy_type</span><span class="p">)</span><span class="o">.</span><span class="n">context_interface</span><span class="p">(</span><span class="n">money</span><span class="p">)</span>
</code></pre></div></div>

<h2 id="3单一职责原则">3.单一职责原则</h2>

<p>类的功能要尽量单一——利于解耦</p>

<h2 id="4开放封闭原则">4.开放封闭原则</h2>

<p>最扩展开放，最修改封闭。（写好的类尽量不要去改动他）
面对需求，对程序的改动是通过增加新代码进行的，而不是更改现有的代码。
在最开始写代码时，假定变化不会发生，当变化发生之后，就要创建抽象来隔离变化。</p>

<h2 id="5依赖倒转原则">5.依赖倒转原则</h2>

<p>抽象不应该依赖于细节，细节应该依赖于抽象。
要对接口编程，而不要对实现编程。
里氏代换原则：子类必须能够替换掉他们的父类型。</p>

<h2 id="6装饰模式">6.装饰模式</h2>

<p>把每个需要装饰的功能放在单独的类中，需要使用新功能时只需要用装饰的类去包装原有的核心类，将类的核心职责和装饰功能分开，避免增加核心类的复杂度。</p>

<p>python自带的装饰器也是一种装饰模式的实现。</p>

<p>穿衣服实例</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># -*- coding:utf-8 -*-
</span><span class="k">class</span> <span class="nc">Person</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>

	<span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">''</span>

	<span class="k">def</span> <span class="nf">set_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>

	<span class="k">def</span> <span class="nf">show</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="k">print</span> <span class="s">u'装扮的{0}'</span><span class="o">.</span><span class="nb">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">Finery</span><span class="p">(</span><span class="n">Person</span><span class="p">):</span>

	<span class="k">def</span> <span class="nf">set_decorate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">component</span><span class="p">):</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">component</span> <span class="o">=</span> <span class="n">component</span>

	<span class="k">def</span> <span class="nf">show</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="p">:</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

<span class="k">class</span> <span class="nc">TShirts</span><span class="p">(</span><span class="n">Finery</span><span class="p">):</span>

	<span class="k">def</span> <span class="nf">show</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="k">print</span> <span class="s">u'T-shirt.'</span>
		<span class="nb">super</span><span class="p">(</span><span class="n">TShirts</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

<span class="k">class</span> <span class="nc">BigTrouser</span><span class="p">(</span><span class="n">Finery</span><span class="p">):</span>

	<span class="k">def</span> <span class="nf">show</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="k">print</span> <span class="s">u'Big-Trouser.'</span>
		<span class="nb">super</span><span class="p">(</span><span class="n">BigTrouser</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span>
	<span class="n">xiao_ming</span> <span class="o">=</span> <span class="n">Person</span><span class="p">()</span>
	<span class="n">xiao_ming</span><span class="o">.</span><span class="n">set_name</span><span class="p">(</span><span class="s">'xiaoMing'</span><span class="p">)</span>

	<span class="k">print</span> <span class="s">u'第一种装扮：'</span>
	<span class="n">t_shirt</span> <span class="o">=</span> <span class="n">TShirts</span><span class="p">()</span>
	<span class="n">big</span> <span class="o">=</span> <span class="n">BigTrouser</span><span class="p">()</span>

	<span class="n">t_shirt</span><span class="o">.</span><span class="n">set_decorate</span><span class="p">(</span><span class="n">xiao_ming</span><span class="p">)</span>
	<span class="n">big</span><span class="o">.</span><span class="n">set_decorate</span><span class="p">(</span><span class="n">t_shirt</span><span class="p">)</span>

	<span class="n">big</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div></div>

<h2 id="7代理模式">7.代理模式</h2>

<p>用代理对象去调用真是对象的接口，可以完成一些额外的事。</p>

<p>代理和真是对象公用一个接口（继承自同一基类）。代理此接口的真正目的是调用真实对象的接口。</p>

<p>代码实例：</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># -*- coding:utf-8 -*-
</span>
<span class="k">class</span> <span class="nc">Subject</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>

	<span class="k">def</span> <span class="nf">request</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="k">raise</span> <span class="nb">NotImplementedError</span>

<span class="k">class</span> <span class="nc">RealSubject</span><span class="p">(</span><span class="n">Subject</span><span class="p">):</span>

	<span class="k">def</span> <span class="nf">request</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="k">print</span> <span class="s">'Real Request.'</span>

<span class="k">class</span> <span class="nc">ProxySubject</span><span class="p">(</span><span class="n">Subject</span><span class="p">):</span>

	<span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">real</span> <span class="o">=</span> <span class="n">RealSubject</span><span class="p">()</span>

	<span class="k">def</span> <span class="nf">request</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">real</span><span class="o">.</span><span class="n">request</span><span class="p">()</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span>
	<span class="n">proxy</span> <span class="o">=</span> <span class="n">ProxySubject</span><span class="p">()</span>
	<span class="n">proxy</span><span class="o">.</span><span class="n">request</span><span class="p">()</span>
</code></pre></div></div>

<h2 id="8工厂方法模式">8.工厂方法模式</h2>

<p>将简单工厂模式实例化类的时机延后到工厂子类进行，克服了简单工厂模式违背封闭原则的缺点。</p>

<p>但其仍有缺点：判断分支从工厂中转移到了客户端中进行。相当于绕了一圈又绕回来了。</p>

<p>计算器实例：</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># -*- coding:utf-8 -*-
</span><span class="kn">import</span> <span class="nn">re</span>

<span class="k">class</span> <span class="nc">Operation</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
	<span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">a</span> <span class="o">=</span> <span class="n">a</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">b</span> <span class="o">=</span> <span class="n">b</span>

	<span class="k">def</span> <span class="nf">calculate_result</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="n">result</span> <span class="o">=</span> <span class="mi">0</span>
		<span class="k">return</span> <span class="n">result</span>

<span class="k">class</span> <span class="nc">AddOperation</span><span class="p">(</span><span class="n">Operation</span><span class="p">):</span>
	<span class="k">def</span> <span class="nf">calculate_result</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">a</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">b</span>
		<span class="k">return</span> <span class="n">result</span>

<span class="k">class</span> <span class="nc">SubtractOperation</span><span class="p">(</span><span class="n">Operation</span><span class="p">):</span>
	<span class="k">def</span> <span class="nf">calculate_result</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">a</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">b</span>
		<span class="k">return</span> <span class="n">result</span>

<span class="k">class</span> <span class="nc">MultiplicationOperation</span><span class="p">(</span><span class="n">Operation</span><span class="p">):</span>
	<span class="k">def</span> <span class="nf">calculate_result</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">a</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">b</span>
		<span class="k">return</span> <span class="n">result</span>

<span class="k">class</span> <span class="nc">DivisionOperation</span><span class="p">(</span><span class="n">Operation</span><span class="p">):</span>
	<span class="k">def</span> <span class="nf">calculate_result</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">a</span> <span class="o">//</span> <span class="bp">self</span><span class="o">.</span><span class="n">b</span>
		<span class="k">return</span> <span class="n">result</span>

<span class="k">class</span> <span class="nc">IFactory</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
	<span class="k">def</span> <span class="nf">create_operation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
		<span class="k">raise</span> <span class="nb">NotImplementedError</span>

<span class="k">class</span> <span class="nc">AddFactory</span><span class="p">(</span><span class="n">IFactory</span><span class="p">):</span>
	<span class="k">def</span> <span class="nf">create_operation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
		<span class="k">return</span> <span class="n">AddOperation</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">SubFactory</span><span class="p">(</span><span class="n">IFactory</span><span class="p">):</span>
	<span class="k">def</span> <span class="nf">create_operation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
		<span class="k">return</span> <span class="n">SubtractOperation</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">MulFactory</span><span class="p">(</span><span class="n">IFactory</span><span class="p">):</span>
	<span class="k">def</span> <span class="nf">create_operation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
		<span class="k">return</span> <span class="n">MultiplicationOperation</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">DivFactory</span><span class="p">(</span><span class="n">IFactory</span><span class="p">):</span>
	<span class="k">def</span> <span class="nf">create_operation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
		<span class="k">return</span> <span class="n">DivisionOperation</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span>
	<span class="n">input_string</span> <span class="o">=</span> <span class="nb">raw_input</span><span class="p">(</span><span class="s">'Enter your operation such as </span><span class="se">\'</span><span class="s">10+11=</span><span class="se">\'</span><span class="s">:'</span><span class="p">)</span>
	<span class="n">pattern</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="nb">compile</span><span class="p">(</span><span class="s">r'(\d+)(\+|\-|\*|\/)(\d+)'</span><span class="p">)</span>
	<span class="n">items</span> <span class="o">=</span> <span class="n">pattern</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="n">input_string</span><span class="p">)</span>
	<span class="k">try</span><span class="p">:</span>
		<span class="n">a</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">items</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
		<span class="n">operation</span> <span class="o">=</span> <span class="n">items</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
		<span class="n">b</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">items</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">2</span><span class="p">])</span>
		<span class="k">if</span> <span class="n">operation</span> <span class="o">==</span> <span class="s">'+'</span><span class="p">:</span>
			<span class="n">oper</span> <span class="o">=</span> <span class="n">AddFactory</span><span class="p">()</span><span class="o">.</span><span class="n">create_operation</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
		<span class="k">elif</span> <span class="n">operation</span> <span class="o">==</span> <span class="s">'-'</span><span class="p">:</span>
			<span class="n">oper</span> <span class="o">=</span> <span class="n">SubFactory</span><span class="p">()</span><span class="o">.</span><span class="n">create_operation</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
		<span class="k">elif</span> <span class="n">operation</span> <span class="o">==</span> <span class="s">'*'</span><span class="p">:</span>
			<span class="n">oper</span> <span class="o">=</span> <span class="n">MulFactory</span><span class="p">()</span><span class="o">.</span><span class="n">create_operation</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
		<span class="k">elif</span> <span class="n">operation</span> <span class="o">==</span> <span class="s">'/'</span><span class="p">:</span>
			<span class="n">oper</span> <span class="o">=</span> <span class="n">DivFactory</span><span class="p">()</span><span class="o">.</span><span class="n">create_operation</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
		<span class="k">print</span> <span class="n">oper</span><span class="o">.</span><span class="n">calculate_result</span><span class="p">()</span>
	<span class="k">except</span><span class="p">:</span>
		<span class="k">print</span> <span class="s">'Wrong Input.'</span>
</code></pre></div></div>

<h2 id="9原型模式">9.原型模式</h2>

<p>从一个对象再创建一个可定制的对象，而且不需要知道任何创建的细节。（不需要再手动实例化一个新实例）
tip：这里涉及了深浅拷贝的概念。</p>

<p>优点：隐藏创建细节，提高性能。（不需要每次都调用构造函数）</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">copy</span>

<span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
	<span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">authors</span><span class="p">,</span> <span class="n">price</span><span class="p">):</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">authors</span> <span class="o">=</span> <span class="n">authors</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">price</span> <span class="o">=</span> <span class="n">price</span>

	<span class="k">def</span> <span class="nf">clone</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
		<span class="n">book_copy</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
		<span class="n">book_copy</span><span class="o">.</span><span class="n">__dict__</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
		<span class="k">return</span> <span class="n">book_copy</span>

<span class="n">book1</span> <span class="o">=</span> <span class="n">Book</span><span class="p">(</span><span class="s">'Python'</span><span class="p">,</span> <span class="p">[</span><span class="s">'Tom'</span><span class="p">,</span> <span class="s">'Jack'</span><span class="p">],</span> <span class="mi">10</span><span class="p">)</span>
<span class="n">book2</span> <span class="o">=</span> <span class="n">book1</span><span class="o">.</span><span class="n">clone</span><span class="p">(</span><span class="n">price</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
<span class="k">print</span> <span class="n">book2</span><span class="o">.</span><span class="n">__dict__</span>
<span class="c1"># {'price': 20, 'name': 'Python', 'authors': ['Tom', 'Jack']}
</span></code></pre></div></div>

<h2 id="10-模板方法模式">10. 模板方法模式</h2>

<p>比较常见的设计模式，制定一种工作流或算法的特定骨架而将具体实现放到子类中。</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">FatherClass</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">tempmethod</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">print</span> <span class="s">"first step: red"</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">childmethod</span><span class="p">()</span>
        <span class="k">print</span> <span class="s">"third step: blue"</span>

    <span class="k">def</span> <span class="nf">childmethod</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">raise</span> <span class="nb">NotImplementedError</span>

<span class="k">class</span> <span class="nc">ChildClass1</span><span class="p">(</span><span class="n">FatherClass</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">childmethod</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">print</span> <span class="s">"second step: green"</span>

<span class="k">class</span> <span class="nc">ChildClass2</span><span class="p">(</span><span class="n">FatherClass</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">childmethod</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">print</span> <span class="s">"second step: yellow"</span>

</code></pre></div></div>

<h2 id="11迪米特法则">11.迪米特法则</h2>

<p>如果两个类不必彼此直接通信，那么这两个类就不应当发生直接的相互作用。如果一个类要调用另一个类的某一个方法，可以通过第三者转发这个调用。</p>

<p>强调类之间的松耦合。耦合度越低，越利于复用。</p>

<h2 id="12外观模式">12.外观模式</h2>

<p>给一组系统方法一个统一的接口，提供了一个更高层的接口方法。</p>

<p>有点类似代理模式。</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">ModuleOne</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">Create</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">print</span> <span class="s">'create module one instance'</span>

    <span class="k">def</span> <span class="nf">Delete</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">print</span> <span class="s">'delete module one instance'</span>

<span class="k">class</span> <span class="nc">ModuleTwo</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">Create</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">print</span> <span class="s">'create module two instance'</span>

    <span class="k">def</span> <span class="nf">Delete</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">print</span> <span class="s">'delete module two instance'</span>

<span class="k">class</span> <span class="nc">Facade</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">module_one</span> <span class="o">=</span> <span class="n">ModuleOne</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">module_two</span> <span class="o">=</span> <span class="n">ModuleTwo</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">create_module_one</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">module_one</span><span class="o">.</span><span class="n">Create</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">create_module_two</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">module_two</span><span class="o">.</span><span class="n">Create</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">create_both</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">module_one</span><span class="o">.</span><span class="n">Create</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">module_two</span><span class="o">.</span><span class="n">Create</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">delete_module_one</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">module_one</span><span class="o">.</span><span class="n">Delete</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">delete_module_two</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">module_two</span><span class="o">.</span><span class="n">Delete</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">delete_both</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">module_one</span><span class="o">.</span><span class="n">Delete</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">module_two</span><span class="o">.</span><span class="n">Delete</span><span class="p">()</span>
</code></pre></div></div>

<h2 id="13建造者模式">13.建造者模式</h2>

<p>讲一个复杂对象的构建和他的表示分离，这样可以用同样的构建方式创建不同的表示。</p>

<p>优点：对象内部的构建顺序是稳定的，建造者隐藏了产品如何组装。</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># -*- coding:utf-8 -*-
</span>
<span class="k">class</span> <span class="nc">Builder</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
<span class="c1"># 抽象建造者类，也可以说是产品类
</span>	<span class="k">def</span> <span class="nf">part1</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="k">raise</span> <span class="nb">NotImplementedError</span>

	<span class="k">def</span> <span class="nf">part2</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="k">raise</span> <span class="nb">NotImplementedError</span>

<span class="k">class</span> <span class="nc">Builder1</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>

	<span class="k">def</span> <span class="nf">part1</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="k">print</span> <span class="s">'builder1 part1'</span>

	<span class="k">def</span> <span class="nf">part2</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="k">print</span> <span class="s">'builder1 part2'</span>

<span class="k">class</span> <span class="nc">Builder2</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>

	<span class="k">def</span> <span class="nf">part1</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="k">print</span> <span class="s">'builder2 part1'</span>

	<span class="k">def</span> <span class="nf">part2</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="k">print</span> <span class="s">'builder2 part2'</span>

<span class="k">class</span> <span class="nc">Director</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>

	<span class="k">def</span> <span class="nf">build</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">builder</span><span class="p">):</span>
		<span class="n">builder</span><span class="o">.</span><span class="n">part1</span><span class="p">()</span>
		<span class="n">builder</span><span class="o">.</span><span class="n">part2</span><span class="p">()</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span>
	<span class="n">builder</span> <span class="o">=</span> <span class="n">Builder1</span><span class="p">()</span>
	<span class="n">director</span> <span class="o">=</span> <span class="n">Director</span><span class="p">()</span>

	<span class="n">director</span><span class="o">.</span><span class="n">build</span><span class="p">(</span><span class="n">builder</span><span class="p">)</span>
</code></pre></div></div>

<p>也可以将<code class="highlighter-rouge">Director</code>的代码已到<code class="highlighter-rouge">Builder</code>类中，实现模板方法模式。</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">Builder</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="c1"># ···
</span>    <span class="k">def</span> <span class="nf">build</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">part1</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">part2</span><span class="p">()</span>
</code></pre></div></div>

<h2 id="14观察者模式">14.观察者模式</h2>

<p>又称作Pub/Sub模式
定义了一种一对多的依赖关系，让众多观察者可以同时关注某一主题，当主题发生变化时每个观察者都会更新自己的状态。
许多MQ都是通过这一模式实现的。</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">Topic</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>

	<span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">obs</span> <span class="o">=</span> <span class="p">[]</span>

	<span class="k">def</span> <span class="nf">attach</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">observer</span><span class="p">):</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">obs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">observer</span><span class="p">)</span>

	<span class="k">def</span> <span class="nf">detach</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">observer</span><span class="p">):</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">observer</span><span class="p">)</span>

	<span class="k">def</span> <span class="nf">notify</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">):</span>
		<span class="k">for</span> <span class="n">observer</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">obs</span><span class="p">:</span>
			<span class="n">observer</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">Observer</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>

	<span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">):</span>
		<span class="k">raise</span> <span class="nb">NotImplementedError</span>

<span class="k">class</span> <span class="nc">ConcreteObserver</span><span class="p">(</span><span class="n">Observer</span><span class="p">):</span>

	<span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">):</span>
		<span class="k">print</span> <span class="n">message</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span>
	<span class="n">topic</span> <span class="o">=</span> <span class="n">Topic</span><span class="p">()</span>
	<span class="n">ob1</span> <span class="o">=</span> <span class="n">ConcreteObserver</span><span class="p">()</span>
	<span class="n">ob2</span> <span class="o">=</span> <span class="n">ConcreteObserver</span><span class="p">()</span>
	<span class="n">topic</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">ob1</span><span class="p">)</span>
	<span class="n">topic</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">ob2</span><span class="p">)</span>
	<span class="n">topic</span><span class="o">.</span><span class="n">notify</span><span class="p">(</span><span class="s">"hello"</span><span class="p">)</span>

</code></pre></div></div>

<h2 id="15抽象工厂模式">15.抽象工厂模式</h2>

<p>创建具有一定功能的产品实现时，需要先创建具体的工厂类，再由工厂类创建具有特定实现的产品对象。</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># -*- coding:utf-8 -*-
</span>
<span class="k">class</span> <span class="nc">IUser</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>

	<span class="k">def</span> <span class="nf">insert_user</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user</span><span class="p">):</span>
		<span class="k">raise</span> <span class="nb">NotImplementedError</span>

	<span class="k">def</span> <span class="nf">get_user</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">userid</span><span class="p">):</span>
		<span class="k">raise</span> <span class="nb">NotImplementedError</span>

<span class="k">class</span> <span class="nc">IRole</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
	<span class="k">def</span> <span class="nf">insert_role</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">role</span><span class="p">):</span>
		<span class="k">raise</span> <span class="nb">NotImplementedError</span>

	<span class="k">def</span> <span class="nf">get_role</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">roleid</span><span class="p">):</span>
		<span class="k">raise</span> <span class="nb">NotImplementedError</span>

<span class="k">class</span> <span class="nc">SqlServerUser</span><span class="p">(</span><span class="n">IUser</span><span class="p">):</span>

	<span class="k">def</span> <span class="nf">insert_user</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user</span><span class="p">):</span>
		<span class="k">print</span> <span class="s">u"在SQL Server中给User表增加一条记录."</span>

	<span class="k">def</span> <span class="nf">get_user</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">userid</span><span class="p">):</span>
		<span class="k">print</span> <span class="s">u"在SQL Server中拿到一条uer信息。"</span>

<span class="k">class</span> <span class="nc">SqlServerRole</span><span class="p">(</span><span class="n">IRole</span><span class="p">):</span>
	<span class="k">def</span> <span class="nf">insert_role</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">role</span><span class="p">):</span>
		<span class="k">print</span> <span class="s">u"在SQL Server中给Role表增加一条记录"</span>

	<span class="k">def</span> <span class="nf">get_role</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">roleid</span><span class="p">):</span>
		<span class="k">print</span> <span class="s">u"在SQL Server中拿到一条role记录"</span>

<span class="c1"># 产品类
</span><span class="k">class</span> <span class="nc">AccessUser</span><span class="p">(</span><span class="n">IUser</span><span class="p">):</span>
	<span class="k">def</span> <span class="nf">insert_user</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user</span><span class="p">):</span>
		<span class="k">print</span> <span class="s">u"在Access中给User表增加一条记录."</span>

	<span class="k">def</span> <span class="nf">get_user</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">userid</span><span class="p">):</span>
		<span class="k">print</span> <span class="s">u"在Access中拿到一条uer信息。"</span>

<span class="k">class</span> <span class="nc">AccessRole</span><span class="p">(</span><span class="n">IUser</span><span class="p">):</span>
	<span class="k">def</span> <span class="nf">insert_role</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">role</span><span class="p">):</span>
		<span class="k">print</span> <span class="s">u"在Access中给Role表增加一条记录"</span>

	<span class="k">def</span> <span class="nf">get_role</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">roleid</span><span class="p">):</span>
		<span class="k">print</span> <span class="s">u"在Access中拿到一条role记录"</span>

<span class="c1"># 抽象工厂类
</span><span class="k">class</span> <span class="nc">IFactory</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
	<span class="k">def</span> <span class="nf">create_user</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="k">raise</span> <span class="nb">NotImplementedError</span>

	<span class="k">def</span> <span class="nf">create_role</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="k">raise</span> <span class="nb">NotImplementedError</span>

<span class="c1"># 具体工厂类
</span><span class="k">class</span> <span class="nc">SqlServerFactory</span><span class="p">(</span><span class="n">IFactory</span><span class="p">):</span>

	<span class="k">def</span> <span class="nf">create_user</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="k">return</span> <span class="n">SqlServerUser</span><span class="p">()</span>

	<span class="k">def</span> <span class="nf">create_role</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="k">return</span> <span class="n">SqlServerRole</span><span class="p">()</span>

<span class="c1"># 具体工厂类
</span><span class="k">class</span> <span class="nc">AccessFactory</span><span class="p">(</span><span class="n">IFactory</span><span class="p">):</span>

	<span class="k">def</span> <span class="nf">create_user</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="k">return</span> <span class="n">AccessUser</span><span class="p">()</span>

	<span class="k">def</span> <span class="nf">create_role</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="k">return</span> <span class="n">AccessRole</span><span class="p">()</span>

<span class="k">class</span> <span class="nc">User</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>

	<span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="p">):</span>
		<span class="bp">self</span><span class="o">.</span><span class="nb">id</span> <span class="o">=</span> <span class="nb">id</span>

<span class="k">class</span> <span class="nc">Role</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>

	<span class="k">def</span> <span class="nf">__init</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="p">):</span>
		<span class="bp">self</span><span class="o">.</span><span class="nb">id</span> <span class="o">=</span> <span class="nb">id</span>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span>

	<span class="n">user</span> <span class="o">=</span> <span class="n">User</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
	<span class="n">factory</span> <span class="o">=</span> <span class="n">SqlServerFactory</span><span class="p">()</span>
	<span class="n">iu</span> <span class="o">=</span> <span class="n">factory</span><span class="o">.</span><span class="n">create_user</span><span class="p">()</span>

	<span class="n">iu</span><span class="o">.</span><span class="n">insert_user</span><span class="p">(</span><span class="n">user</span><span class="p">)</span>
	<span class="n">iu</span><span class="o">.</span><span class="n">get_user</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</code></pre></div></div>

<p>也可以考虑用引入简单工厂加反射进行优化。</p>

<h2 id="16状态模式">16.状态模式</h2>

<p>对象的行为取决于它的状态，并且他需要在运行时刻根据状态改变它的行为。</p>

<p>此时会产生大量判断语句，使用状态模式可以消除这些判断语句，降低耦合性。</p>

<p>工作实例：</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># -*- coding:utf-8 -*-
</span>
<span class="k">class</span> <span class="nc">State</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
	<span class="k">def</span> <span class="nf">write_program</span><span class="p">(</span><span class="n">work</span><span class="p">):</span>
		<span class="k">raise</span> <span class="nb">NotImplementedError</span>

<span class="k">class</span> <span class="nc">ForenoonState</span><span class="p">(</span><span class="n">State</span><span class="p">):</span>
	<span class="k">def</span> <span class="nf">write_program</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">wrok</span><span class="p">):</span>
		<span class="k">if</span> <span class="n">work</span><span class="o">.</span><span class="n">hour</span> <span class="o">&lt;</span> <span class="mi">12</span><span class="p">:</span>
			<span class="k">print</span> <span class="s">u"当前时间: {}点， 上午工作，精神百倍"</span><span class="o">.</span><span class="nb">format</span><span class="p">(</span><span class="n">work</span><span class="o">.</span><span class="n">hour</span><span class="p">)</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="n">wrok</span><span class="o">.</span><span class="n">set_state</span><span class="p">(</span><span class="n">NoonState</span><span class="p">())</span>
			<span class="n">work</span><span class="o">.</span><span class="n">write_program</span><span class="p">()</span>

<span class="k">class</span> <span class="nc">NoonState</span><span class="p">(</span><span class="n">State</span><span class="p">):</span>
	<span class="k">def</span> <span class="nf">write_program</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">work</span><span class="p">):</span>
		<span class="k">if</span> <span class="n">work</span><span class="o">.</span><span class="n">hour</span> <span class="o">&lt;</span> <span class="mi">13</span><span class="p">:</span>
			<span class="k">print</span> <span class="s">u"当前时间：{}点， 饿了，午饭； 困了，午休"</span><span class="o">.</span><span class="nb">format</span><span class="p">(</span><span class="n">work</span><span class="o">.</span><span class="n">hour</span><span class="p">)</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="n">work</span><span class="o">.</span><span class="n">set_state</span><span class="p">(</span><span class="n">AfternoonState</span><span class="p">())</span>
			<span class="n">work</span><span class="o">.</span><span class="n">write_program</span><span class="p">()</span>

<span class="k">class</span> <span class="nc">AfternoonState</span><span class="p">(</span><span class="n">State</span><span class="p">):</span>
	<span class="k">def</span> <span class="nf">write_program</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">work</span><span class="p">):</span>
		<span class="k">if</span> <span class="n">work</span><span class="o">.</span><span class="n">task_finished</span><span class="p">:</span>
			<span class="n">work</span><span class="o">.</span><span class="n">set_state</span><span class="p">(</span><span class="n">RestState</span><span class="p">())</span>
		<span class="k">if</span> <span class="n">work</span><span class="o">.</span><span class="n">hour</span> <span class="o">&lt;</span> <span class="mi">17</span><span class="p">:</span>
			<span class="k">print</span> <span class="s">u"当前时间：{}点， 下午状态不错，继续努力"</span><span class="o">.</span><span class="nb">format</span><span class="p">(</span><span class="n">work</span><span class="o">.</span><span class="n">hour</span><span class="p">)</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="n">work</span><span class="o">.</span><span class="n">set_state</span><span class="p">(</span><span class="n">EveningState</span><span class="p">())</span>
			<span class="n">work</span><span class="o">.</span><span class="n">write_program</span><span class="p">()</span>

<span class="k">class</span> <span class="nc">EveningState</span><span class="p">(</span><span class="n">State</span><span class="p">):</span>
	<span class="k">def</span> <span class="nf">write_program</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">work</span><span class="p">):</span>
		<span class="k">print</span> <span class="s">u"当前时间： {}点， 又要加班了！"</span><span class="o">.</span><span class="nb">format</span><span class="p">(</span><span class="n">work</span><span class="o">.</span><span class="n">hour</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">RestState</span><span class="p">(</span><span class="n">State</span><span class="p">):</span>
	<span class="k">def</span> <span class="nf">write_program</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">work</span><span class="p">):</span>
		<span class="k">print</span> <span class="s">u"当前时间： {}点， 下班回家啦"</span><span class="o">.</span><span class="nb">format</span><span class="p">(</span><span class="n">work</span><span class="o">.</span><span class="n">hour</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">Work</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
	<span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">current</span> <span class="o">=</span> <span class="n">ForenoonState</span><span class="p">()</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">hour</span> <span class="o">=</span> <span class="mi">9</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">task_finished</span> <span class="o">=</span> <span class="bp">False</span>

	<span class="k">def</span> <span class="nf">set_hour</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">hour</span><span class="p">):</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">hour</span> <span class="o">=</span> <span class="n">hour</span>

	<span class="k">def</span> <span class="nf">set_finished</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">finished</span><span class="p">):</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">set_finished</span> <span class="o">=</span> <span class="n">finished</span>

	<span class="k">def</span> <span class="nf">set_state</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="p">):</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">current</span> <span class="o">=</span> <span class="n">state</span>

	<span class="k">def</span> <span class="nf">write_program</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">current</span><span class="o">.</span><span class="n">write_program</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">"__main__"</span><span class="p">:</span>
	<span class="n">work</span> <span class="o">=</span> <span class="n">Work</span><span class="p">()</span>
	<span class="n">work</span><span class="o">.</span><span class="n">set_hour</span><span class="p">(</span><span class="mi">9</span><span class="p">)</span>
	<span class="n">work</span><span class="o">.</span><span class="n">write_program</span><span class="p">()</span>
</code></pre></div></div>

<h2 id="17适配器模式">17.适配器模式</h2>

<p>当一个类的功能和数据相同而接口不同时，需要适配器模式充当翻译角色。</p>

<p>缺点：亡羊补牢</p>

<p>NBA翻译实例：</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># -*- coding:utf-8 -*-
</span>
<span class="k">class</span> <span class="nc">Player</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
	<span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>

	<span class="k">def</span> <span class="nf">attack</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="k">print</span> <span class="s">u"{} 进攻"</span><span class="o">.</span><span class="nb">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

	<span class="k">def</span> <span class="nf">defense</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="k">print</span> <span class="s">u"{} 防守"</span><span class="o">.</span><span class="nb">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">ForeignPlayer</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>

	<span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>

	<span class="k">def</span> <span class="nf">jingong</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="k">print</span> <span class="s">u"{} 进攻"</span><span class="o">.</span><span class="nb">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

	<span class="k">def</span> <span class="nf">fangshou</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="k">print</span> <span class="s">u"{} 防守"</span><span class="o">.</span><span class="nb">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">Translator</span><span class="p">(</span><span class="n">Player</span><span class="p">):</span>

	<span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
		<span class="nb">super</span><span class="p">(</span><span class="n">Translator</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">fp</span> <span class="o">=</span> <span class="n">ForeignPlayer</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

	<span class="k">def</span> <span class="nf">attack</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">fp</span><span class="o">.</span><span class="n">jingong</span><span class="p">()</span>

	<span class="k">def</span> <span class="nf">defense</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">fp</span><span class="o">.</span><span class="n">fangshou</span><span class="p">()</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span>
	<span class="n">b</span> <span class="o">=</span> <span class="n">Player</span><span class="p">(</span><span class="s">"Bdier"</span><span class="p">)</span>
	<span class="n">b</span><span class="o">.</span><span class="n">attack</span><span class="p">()</span>

	<span class="n">m</span> <span class="o">=</span> <span class="n">Player</span><span class="p">(</span><span class="s">"Mical"</span><span class="p">)</span>
	<span class="n">m</span><span class="o">.</span><span class="n">attack</span><span class="p">()</span>

	<span class="n">ym</span> <span class="o">=</span> <span class="n">Translator</span><span class="p">(</span><span class="s">"YaoMing"</span><span class="p">)</span>
	<span class="n">ym</span><span class="o">.</span><span class="n">attack</span><span class="p">()</span>
	<span class="n">ym</span><span class="o">.</span><span class="n">defense</span><span class="p">()</span>
</code></pre></div></div>


        </article>
        <hr>

        
        
            
            
                
                    
                
            
                
                    
                
            
        
            
            
                
                    
                
            
                
                    
                
            
                
                    
                
            
        
            
            
                
                    
                
            
                
                    
                
            
                
                    
                
            
                
                    
                
            
        
            
            
                
                    
                
            
                
                    
                
            
                
                    
                
            
                
                    
                
            
        
            
            
                
                    
                
            
                
                    
                
            
                
                    
                
            
        
            
            
                
                    
                
            
                
                    
                
            
                
                    
                
            
        
            
            
                
                    
                
            
                
                    
                
            
                
                    
                
            
                
                    
                
            
                
                    
                
            
        
            
            
                
                    
                
            
                
                    
                
            
        
            
            
                
                    
                
            
                
                    
                
            
        
            
            
                
                    
                
            
                
                    
                
            
        
        

        <div class="post-recent">
    <div class="pre">
        
        <p><strong>上一篇</strong> <a href="/2017/04/08/iter/">Python的迭代器，可迭代对象和生成器</a></p>
        
    </div>
    <div class="nex">

        
        <p><strong>下一篇</strong> <a href="/2018/01/16/yewu1/">Python Web 基础向（一） 项目结构</a></p>
        
    </div>
</div>


        <h2 id="comments">Comments</h2>
        


<div id="disqus_thread"></div>
<script>
    /**
     * RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
     * LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables
     */

    var disqus_config = function() {
        this.page.url = 'http://localhost:4000/2017/04/13/shejimoshi/'; // Replace PAGE_URL with your page's canonical URL variable
        this.page.identifier = 'http://localhost:4000/2017/04/13/shejimoshi/'; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
    };

    (function() { // DON'T EDIT BELOW THIS LINE
        var d = document,
            s = d.createElement('script');

        s.src = '//cui1994.disqus.com/embed.js';

        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>




    </div>
    <button class="anchor"><i class="fa fa-anchor"></i></button>
    <div class="right">
        <div class="wrap">

            <!-- Content -->
            <div class="side content">
                <div>
                    Content
                </div>
                <ul id="content-side" class="content-ul">
                    
                    <li><a href="#comments">Comments</a></li>
                </ul>
            </div>
            <!-- 其他div框放到这里 -->
            <!-- <div class="side">bbbb</div> -->
        </div>
    </div>
</div>
<script>
/**
 * target _blank
 */
(function() {
    var aTags = document.querySelectorAll('article a:not([id])')
    for (var i = 0; i < aTags.length; i++) {
        aTags[i].setAttribute('target', '_blank')
    }
}());
</script>
<script src="/js/pageContent.js " charset="utf-8"></script>


    <footer class="site-footer">


    <div class="wrapper">

        <p class="description">
             感谢你来到这里 
        </p>
        <p class="contact">
            Contact me at: 
            <a href="https://github.com/Cui1994" title="GitHub"><i class="fa fa-github" aria-hidden="true"></i></a>  
            <a href="mailto:jintao.cui66@gmail.com" title="email"><i class="fa fa-envelope-o" aria-hidden="true"></i></a>        
        </p>
        <p>
            本站总访问量<span id="busuanzi_value_site_pv"></span>次，本文总阅读量<span id="busuanzi_value_page_pv"></span>次
        </p>
        <p class="power">
            <span>
                Site powered by <a href="https://jekyllrb.com/">Jekyll</a> & <a href="https://pages.github.com/">Github Pages</a>.
            </span>
            <span>
                Theme designed by <a href="https://github.com/Gaohaoyang">HyG</a>.
            </span>
        </p>
    </div>
</footer>
<script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>

    <div class="back-to-top">
    <a href="#top" data-scroll>
        <i class="fa fa-arrow-up" aria-hidden="true"></i>
    </a>
</div>

    <script src=" /js/main.js " charset="utf-8"></script>
    <script src=" /js/smooth-scroll.min.js " charset="utf-8"></script>
    <script type="text/javascript">
      smoothScroll.init({
        speed: 500, // Integer. How fast to complete the scroll in milliseconds
        easing: 'easeInOutCubic', // Easing pattern to use
        offset: 20, // Integer. How far to offset the scrolling anchor location in pixels
      });
    </script>
    <!-- <script src=" /js/scroll.min.js " charset="utf-8"></script> -->
  </body>

</html>
